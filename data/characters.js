import { COLORS } from '../utils/colors.js';

// Character rarities with weights for gacha
export const RARITIES = {
  COMMON: { name: 'Commun', emoji: 'âšª', color: COLORS.RARITY_COMMON, weight: 56 },
  UNCOMMON: { name: 'Peu commun', emoji: 'ðŸŸ¢', color: COLORS.RARITY_UNCOMMON, weight: 26 },
  RARE: { name: 'Rare', emoji: 'ðŸ”µ', color: COLORS.RARITY_RARE, weight: 13 },
  EPIC: { name: 'Ã‰pique', emoji: 'ðŸŸ£', color: COLORS.RARITY_EPIC, weight: 4.5 },
  LEGENDARY: { name: 'LÃ©gendaire', emoji: 'ðŸŸ¡', color: COLORS.RARITY_LEGENDARY, weight: 0.5 },
};

// Character factions
export const FACTIONS = {
  GOUVERNEMENT: 'Gouvernement',
  CITOYEN: 'Citoyen',
  GOTVALIS: 'GotValis',
  HOTEL_DORMANT: 'HÃ´tel Dormant',
  LA_FRACTURE: 'La Fracture',
  INFECTION: 'Infection',
  MONARCHIE: 'Monarchie',
};

// All available characters
export const CHARACTERS = [
  {
    id: 'neyra-velenis',
    name: 'Neyra Velenis',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Toujours souriante derriÃ¨re son comptoir, Neyra connaÃ®t chaque visage, chaque anomalie, chaque dette contractÃ©e. Un mot de sa part... et l\'HÃ´tel lui-mÃªme vous refusera le passage.',
    passive: 'Marque de l\'HÃ´te',
    passiveDescription: '10 % de rÃ©duction des dÃ©gÃ¢ts subis en permanence. Pour chaque attaque reÃ§ue, rÃ©duit les dÃ©gÃ¢ts reÃ§us de 5 % et augmente l\'esquive de 3 % pendant 1h (cumulatif, propre Ã  chaque attaque).',
    image: 'assets/personnages/Neyra Velenis.png',
  },
  {
    id: 'gotvalis',
    name: 'GotValis',
    rarity: 'LEGENDARY',
    faction: 'GOTVALIS',
    description: 'L\'intelligence artificielle qui rÃ©git tout GotValis. MystÃ©rieux, omniscient, et bienveillant... ou peut-Ãªtre pas.',
    passive: 'Omniscience',
    passiveDescription: 'ImmunitÃ© aux effets de statut. +15% Ã  toutes les stats. RÃ©vÃ¨le les intentions ennemies.',
    image: 'assets/personnages/GotValis.png',
  },
  {
    id: 'camille-leroux',
    name: 'Camille Leroux',
    rarity: 'EPIC',
    faction: 'GOUVERNEMENT',
    description: 'Ministre d\'Ã‰tat, dÃ©cisionnaire froide et calculatrice. Elle prÃ©fÃ¨re les dÃ©cisions rationnelles aux Ã©motions.',
    passive: 'AutoritÃ© Gouvernementale',
    passiveDescription: '+10% de dÃ©gÃ¢ts sur les ennemis avec moins de 50% HP. +5% de rÃ©duction de dÃ©gÃ¢ts en groupe.',
    image: 'assets/personnages/Camille Leroux.png',
  },
  {
    id: 'sebastien-moreau',
    name: 'SÃ©bastien Moreau',
    rarity: 'EPIC',
    faction: 'GOUVERNEMENT',
    description: 'Diplomate de carriÃ¨re, connu pour dÃ©samorcer les conflits avant qu\'ils ne commencent.',
    passive: 'NÃ©gociation Subtile',
    passiveDescription: '-10% de dÃ©gÃ¢ts reÃ§us des attaques critiques. +5% de chances d\'esquive.',
    image: 'assets/personnages/SÃ©bastien Moreau.png',
  },
  {
    id: 'julien-vasseur',
    name: 'Julien Vasseur',
    rarity: 'RARE',
    faction: 'GOUVERNEMENT',
    description: 'Agent spÃ©cial du gouvernement. Discret, efficace, mortel.',
    passive: 'Frappe Chirurgicale',
    passiveDescription: '+15% de dÃ©gÃ¢ts critiques. +5% de chances de coup critique.',
    image: 'assets/personnages/Julien Vasseur.png',
  },
  {
    id: 'eloise-dupont',
    name: 'Ã‰loÃ¯se Dupont',
    rarity: 'RARE',
    faction: 'GOUVERNEMENT',
    description: 'Analyste stratÃ©gique, cerveau derriÃ¨re de nombreuses opÃ©rations gouvernementales.',
    passive: 'Analyse Tactique',
    passiveDescription: '+10% de dÃ©gÃ¢ts aux ennemis affaiblis. RÃ©vÃ¨le les points faibles ennemis.',
    image: 'assets/personnages/Ã‰loÃ¯se Dupont.png',
  },
  {
    id: 'thomas-renard',
    name: 'Thomas Renard',
    rarity: 'COMMON',
    faction: 'GOUVERNEMENT',
    description: 'Garde du corps gouvernemental. LoyautÃ© absolue.',
    passive: 'Protection RapprochÃ©e',
    passiveDescription: '+10 HP maximum. +5% de rÃ©duction de dÃ©gÃ¢ts.',
    image: 'assets/personnages/Thomas Renard.png',
  },
  {
    id: 'lucas-martin',
    name: 'Lucas Martin',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Citoyen ordinaire. Travaille comme mÃ©canicien. RÃªve d\'aventure.',
    passive: 'DÃ©brouillardise',
    passiveDescription: '+5% de chances de trouver des objets rares aprÃ¨s un combat.',
    image: 'assets/personnages/Lucas Martin.png',
  },
  {
    id: 'marie-bernard',
    name: 'Marie Bernard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Enseignante passionnÃ©e par son mÃ©tier. Toujours prÃªte Ã  aider.',
    passive: 'Inspiration',
    passiveDescription: '+5% d\'XP gagnÃ©e pour toute l\'Ã©quipe.',
    image: 'assets/personnages/Marie Bernard.png',
  },
  {
    id: 'pierre-dubois',
    name: 'Pierre Dubois',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Boulanger du quartier. Connu pour ses croissants lÃ©gendaires.',
    passive: 'Pain Quotidien',
    passiveDescription: '+5 HP rÃ©gÃ©nÃ©rÃ©s toutes les 30 secondes.',
    image: 'assets/personnages/Pierre Dubois.png',
  },
  {
    id: 'sophie-laurent',
    name: 'Sophie Laurent',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Ã‰tudiante en mÃ©decine. Veut sauver des vies.',
    passive: 'Premiers Soins',
    passiveDescription: '+10% d\'efficacitÃ© des objets de soin.',
    image: 'assets/personnages/Sophie Laurent.png',
  },
  {
    id: 'antoine-roux',
    name: 'Antoine Roux',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Artisan passionnÃ©. Ses crÃ©ations sont uniques.',
    passive: 'Artisanat',
    passiveDescription: 'Les objets fabriquÃ©s ont +5% de qualitÃ©.',
    image: 'assets/personnages/Antoine Roux.png',
  },
  {
    id: 'isabelle-moreau',
    name: 'Isabelle Moreau',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'InfirmiÃ¨re dÃ©vouÃ©e. Soigne tous ceux qui en ont besoin.',
    passive: 'Bienveillance',
    passiveDescription: '+5% de soins donnÃ©s Ã  tous les alliÃ©s.',
    image: 'assets/personnages/Isabelle Moreau.png',
  },
  {
    id: 'jules-fabre',
    name: 'Jules Fabre',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Livreur dÃ©vouÃ©. ConnaÃ®t la ville par cÅ“ur.',
    passive: 'Connaissance du Terrain',
    passiveDescription: '+5% de vitesse de dÃ©placement.',
    image: 'assets/personnages/Jules Fabre.png',
  },
  {
    id: 'clara-petit',
    name: 'Clara Petit',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'BibliothÃ©caire tranquille. Adore les livres anciens.',
    passive: 'Ã‰rudition',
    passiveDescription: '+5% d\'XP gagnÃ©e.',
    image: 'assets/personnages/Clara Petit.png',
  },
  {
    id: 'maxime-girard',
    name: 'Maxime Girard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Jardinier patient. Fait pousser les plus belles fleurs.',
    passive: 'Main Verte',
    passiveDescription: '+5% de chances de rÃ©colter des ressources rares.',
    image: 'assets/personnages/Maxime Girard.png',
  },
  {
    id: 'emma-rousseau',
    name: 'Emma Rousseau',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Photographe talentueuse. Capture la beautÃ© cachÃ©e du monde.',
    passive: 'Å’il d\'Artiste',
    passiveDescription: '+5% de chances de dÃ©couvrir des secrets.',
    image: 'assets/personnages/Emma Rousseau.png',
  },
  {
    id: 'hugo-vincent',
    name: 'Hugo Vincent',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Musicien de rue. Ses mÃ©lodies apaisent les Ã¢mes.',
    passive: 'MÃ©lodie Apaisante',
    passiveDescription: '-5% de stress pour toute l\'Ã©quipe.',
    image: 'assets/personnages/Hugo Vincent.png',
  },
  {
    id: 'chloe-blanchard',
    name: 'ChloÃ© Blanchard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Chef cuisiniÃ¨re. Ses plats sont lÃ©gendaires.',
    passive: 'Festin',
    passiveDescription: 'Les objets de nourriture restaurent +10% de HP.',
    image: 'assets/personnages/ChloÃ© Blanchard.png',
  },
  {
    id: 'mathieu-chevalier',
    name: 'Mathieu Chevalier',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Pompier courageux. Sauve des vies sans hÃ©siter.',
    passive: 'Courage du Feu',
    passiveDescription: '+10% de rÃ©sistance au feu.',
    image: 'assets/personnages/Mathieu Chevalier.png',
  },
  {
    id: 'lea-fontaine',
    name: 'LÃ©a Fontaine',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Avocate brillante. DÃ©fend les innocents.',
    passive: 'Plaidoyer',
    passiveDescription: '+5% de chances de convaincre les PNJ.',
    image: 'assets/personnages/LÃ©a Fontaine.png',
  },
  {
    id: 'nathan-blanc',
    name: 'Nathan Blanc',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Ã‰lectricien compÃ©tent. RÃ©pare tout ce qui est cassÃ©.',
    passive: 'RÃ©paration',
    passiveDescription: 'Les objets rÃ©parÃ©s ont +5% de durabilitÃ©.',
    image: 'assets/personnages/Nathan Blanc.png',
  },
  {
    id: 'anna-lereux-hote-brise',
    name: 'Anna Lereux - HÃ´te BrisÃ©',
    rarity: 'EPIC',
    faction: 'HOTEL_DORMANT',
    description: 'Ancienne hÃ´te de l\'HÃ´tel Dormant. TraumatisÃ©e par ce qu\'elle a vu dans les couloirs Ã©ternels.',
    passive: 'RÃ©silience BrisÃ©e',
    passiveDescription: '+10% de rÃ©sistance aux effets mentaux. RÃ©duit le stress de 5% par minute.',
    image: 'assets/personnages/Anna Lereux - HÃ´te BrisÃ©.png',
  },
  {
    id: 'thomas-dorne',
    name: 'Thomas Dorne',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Portier de l\'HÃ´tel Dormant. Il ne parle jamais, mais ses yeux en disent long.',
    passive: 'Silence Observateur',
    passiveDescription: '+10% d\'esquive. RÃ©vÃ¨le les ennemis cachÃ©s.',
    image: 'assets/personnages/Thomas Dorne.png',
  },
  {
    id: 'la-servante-sans-nom',
    name: 'La Servante Sans Nom',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Une servante fantomatique. On dit qu\'elle nettoie des chambres qui n\'existent plus.',
    passive: 'PrÃ©sence Fantomatique',
    passiveDescription: '+15% d\'esquive. -10% de chances d\'Ãªtre ciblÃ©.',
    image: 'assets/personnages/La Servante Sans Nom.png',
  },
  {
    id: 'le-gardien-eternel',
    name: 'Le Gardien Ã‰ternel',
    rarity: 'LEGENDARY',
    faction: 'HOTEL_DORMANT',
    description: 'Gardien de l\'HÃ´tel Dormant. Personne ne sait depuis combien de temps il est lÃ .',
    passive: 'Ã‰ternitÃ©',
    passiveDescription: 'ImmunitÃ© au vieillissement et aux effets temporels. +20% de HP maximum.',
    image: 'assets/personnages/Le Gardien Ã‰ternel.png',
  },
  {
    id: 'alen-drave',
    name: 'Alen Drave',
    rarity: 'EPIC',
    faction: 'LA_FRACTURE',
    description: 'Leader charismatique de La Fracture. Combat pour la libertÃ© de GotValis.',
    passive: 'Cri de Ralliement',
    passiveDescription: '+10% d\'attaque pour tous les alliÃ©s. +5% de moral de l\'Ã©quipe.',
    image: 'assets/personnages/Alen Drave.png',
  },
  {
    id: 'elise-veyron',
    name: 'Ã‰lise Veyron',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'Hackeuse gÃ©niale. Peut s\'infiltrer dans n\'importe quel systÃ¨me.',
    passive: 'Intrusion NumÃ©rique',
    passiveDescription: '+15% de chances de pirater des systÃ¨mes. RÃ©vÃ¨le les informations cachÃ©es.',
    image: 'assets/personnages/Ã‰lise Veyron.png',
  },
  {
    id: 'marc-tavel',
    name: 'Marc Tavel',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'StratÃ¨ge militaire. Ancien soldat devenu rebelle.',
    passive: 'Tactique Rebelle',
    passiveDescription: '+10% de dÃ©gÃ¢ts d\'embuscade. +5% de dÃ©fense en infÃ©rioritÃ© numÃ©rique.',
    image: 'assets/personnages/Marc Tavel.png',
  },
  {
    id: 'sarah-velin',
    name: 'Sarah Velin',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'MÃ©decin de terrain. Soigne les blessÃ©s de La Fracture.',
    passive: 'Soins d\'Urgence',
    passiveDescription: '+20% d\'efficacitÃ© des soins. Peut soigner pendant le combat.',
    image: 'assets/personnages/Sarah Velin.png',
  },
  {
    id: 'vincent-gray',
    name: 'Vincent Gray',
    rarity: 'COMMON',
    faction: 'LA_FRACTURE',
    description: 'Messager rapide de La Fracture. Transporte des informations cruciales.',
    passive: 'Courrier',
    passiveDescription: '+10% de vitesse de dÃ©placement. +5% d\'esquive.',
    image: 'assets/personnages/Vincent Gray.png',
  },
  {
    id: 'infecte-alpha',
    name: 'InfectÃ© Alpha',
    rarity: 'EPIC',
    faction: 'INFECTION',
    description: 'Premier infectÃ© conscient. Intelligence terrifiante sous l\'apparence monstrueuse.',
    passive: 'Contagion Alpha',
    passiveDescription: 'Les ennemis proches subissent 5 dÃ©gÃ¢ts/sec. +15% de rÃ©sistance aux maladies.',
    image: 'assets/personnages/InfectÃ© Alpha.png',
  },
  {
    id: 'porteur-silencieux',
    name: 'Porteur Silencieux',
    rarity: 'RARE',
    faction: 'INFECTION',
    description: 'InfectÃ© asymptomatique. Propage la maladie sans le savoir.',
    passive: 'Porteur Sain',
    passiveDescription: 'Infecte les ennemis au contact (1% par seconde). ImmunitÃ© aux symptÃ´mes.',
    image: 'assets/personnages/Porteur Silencieux.png',
  },
  {
    id: 'abomination-rampante',
    name: 'Abomination Rampante',
    rarity: 'RARE',
    faction: 'INFECTION',
    description: 'CrÃ©ature hideuse nÃ©e de l\'infection. Plus d\'humanitÃ© en elle.',
    passive: 'RÃ©gÃ©nÃ©ration Morbide',
    passiveDescription: 'RÃ©gÃ©nÃ¨re 3% des HP maximum par seconde. +10% de rÃ©sistance physique.',
    image: 'assets/personnages/Abomination Rampante.png',
  },
  {
    id: 'nuee-virale',
    name: 'NuÃ©e Virale',
    rarity: 'EPIC',
    faction: 'INFECTION',
    description: 'Essaim de virus vivants. Intelligence collective terrifiante.',
    passive: 'Esprit de Ruche',
    passiveDescription: '+5% de stats par infectÃ© alliÃ© Ã  proximitÃ©. Partage les dÃ©gÃ¢ts reÃ§us.',
    image: 'assets/personnages/NuÃ©e Virale.png',
  },
  {
    id: 'patient-zero',
    name: 'Patient ZÃ©ro',
    rarity: 'LEGENDARY',
    faction: 'INFECTION',
    description: 'La source de tout. Le premier infectÃ©. La fin de l\'humanitÃ©.',
    passive: 'Origine de la Fin',
    passiveDescription: 'Tous les infectÃ©s gagnent +20% de stats. ImmunitÃ© totale aux maladies. Infecte les ennemis vaincus.',
    image: 'assets/personnages/Patient ZÃ©ro.png',
  },
  {
    id: 'alphonse-kaedrin',
    name: 'Alphonse Kaedrin',
    rarity: 'LEGENDARY',
    faction: 'MONARCHIE',
    description: 'Roi de l\'ancienne monarchie. Revenu d\'entre les morts pour reprendre son trÃ´ne.',
    passive: 'AutoritÃ© Royale',
    passiveDescription: '+25% de dÃ©gÃ¢ts aux ennemis de rang infÃ©rieur. ImmunitÃ© aux effets de contrÃ´le.',
    image: 'assets/personnages/Alphonse Kaedrin.png',
  },
  {
    id: 'isabeau-de-monfort',
    name: 'Isabeau de Monfort',
    rarity: 'EPIC',
    faction: 'MONARCHIE',
    description: 'Reine dÃ©chue. Belle, cruelle, et assoiffÃ©e de vengeance.',
    passive: 'Vengeance Royale',
    passiveDescription: '+20% de dÃ©gÃ¢ts aprÃ¨s avoir subi des dÃ©gÃ¢ts. +10% de chances de contre-attaque.',
    image: 'assets/personnages/Isabeau de Monfort.png',
  },
  {
    id: 'duc-alaric',
    name: 'Duc Alaric',
    rarity: 'EPIC',
    faction: 'MONARCHIE',
    description: 'Duc puissant et loyal Ã  la couronne. Commande une armÃ©e de chevaliers morts-vivants.',
    passive: 'Commandement Ã‰ternel',
    passiveDescription: 'Les alliÃ©s morts-vivants gagnent +15% de stats. +10% de dÃ©gÃ¢ts avec les armes de mÃªlÃ©e.',
    image: 'assets/personnages/Duc Alaric.png',
  },
  {
    id: 'chevalier-noir',
    name: 'Chevalier Noir',
    rarity: 'RARE',
    faction: 'MONARCHIE',
    description: 'Chevalier sans visage. Loyal jusqu\'Ã  la mort... et au-delÃ .',
    passive: 'LoyautÃ© Aveugle',
    passiveDescription: '+15% de dÃ©fense. ImmunitÃ© Ã  la peur. +10% de dÃ©gÃ¢ts en protÃ©geant un alliÃ©.',
    image: 'assets/personnages/Chevalier Noir.png',
  },
  {
    id: 'dame-seraphine',
    name: 'Dame SÃ©raphine',
    rarity: 'RARE',
    faction: 'MONARCHIE',
    description: 'Noble Ã©lÃ©gante et manipulatrice. Ses mots sont des armes.',
    passive: 'Manipulation Courtoise',
    passiveDescription: '+10% de chances de charmer les ennemis. -5% de dÃ©gÃ¢ts reÃ§us des ennemis charmÃ©s.',
    image: 'assets/personnages/Dame SÃ©raphine.png',
  },
  {
    id: 'garde-royal',
    name: 'Garde Royal',
    rarity: 'COMMON',
    faction: 'MONARCHIE',
    description: 'Soldat loyal Ã  la monarchie. ProtÃ¨ge la couronne Ã  tout prix.',
    passive: 'Garde Royale',
    passiveDescription: '+10% de dÃ©fense. +5 HP maximum.',
    image: 'assets/personnages/Garde Royal.png',
  },
];

// Get a random rarity based on weights
export function getRandomRarity() {
  const totalWeight = Object.values(RARITIES).reduce((sum, r) => sum + r.weight, 0);
  let random = Math.random() * totalWeight;

  for (const [key, rarity] of Object.entries(RARITIES)) {
    random -= rarity.weight;
    if (random <= 0) {
      return key;
    }
  }

  return 'COMMON';
}

// Get random character of specific rarity
export function getRandomCharacterByRarity(rarity) {
  const charactersOfRarity = CHARACTERS.filter(c => c.rarity === rarity);
  if (charactersOfRarity.length === 0) {
    return CHARACTERS[Math.floor(Math.random() * CHARACTERS.length)];
  }
  return charactersOfRarity[Math.floor(Math.random() * charactersOfRarity.length)];
}

// Summon a random character
export function summonCharacter() {
  const rarity = getRandomRarity();
  return getRandomCharacterByRarity(rarity);
}

// Get character by ID
export function getCharacterById(id) {
  return CHARACTERS.find(c => c.id === id);
}

// Get rarity info
export function getRarityInfo(rarity) {
  return RARITIES[rarity] || RARITIES.COMMON;
}
