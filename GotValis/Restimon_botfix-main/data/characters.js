import { COLORS } from '../utils/colors.js';

// Character rarities with weights for gacha
export const RARITIES = {
  COMMON: { name: 'Commun', emoji: '‚ö™', color: COLORS.RARITY_COMMON, weight: 56 },
  UNCOMMON: { name: 'Peu commun', emoji: 'üü¢', color: COLORS.RARITY_UNCOMMON, weight: 26 },
  RARE: { name: 'Rare', emoji: 'üîµ', color: COLORS.RARITY_RARE, weight: 13 },
  EPIC: { name: '√âpique', emoji: 'üü£', color: COLORS.RARITY_EPIC, weight: 4.5 },
  LEGENDARY: { name: 'L√©gendaire', emoji: 'üü°', color: COLORS.RARITY_LEGENDARY, weight: 0.5 },
};

// Character factions
export const FACTIONS = {
  GOUVERNEMENT: 'Gouvernement',
  CITOYEN: 'Citoyen',
  GOTVALIS: 'GotValis',
  HOTEL_DORMANT: 'H√¥tel Dormant',
  LA_FRACTURE: 'La Fracture',
  INFECTION: 'Infection',
  MONARCHIE: 'Monarchie',
};

// All available characters
export const CHARACTERS = [
  {
    id: 'neyra-velenis',
    name: 'Neyra Velenis',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Toujours souriante derri√®re son comptoir, Neyra conna√Æt chaque visage, chaque anomalie, chaque dette contract√©e. Un mot de sa part... et l\'H√¥tel lui-m√™me vous refusera le passage.',
    passive: 'Marque de l\'H√¥te',
    passiveDescription: '10 % de r√©duction des d√©g√¢ts subis en permanence. Pour chaque attaque re√ßue, r√©duit les d√©g√¢ts re√ßus de 5 % et augmente l\'esquive de 3 % pendant 1h (cumulatif, propre √† chaque attaque).',
    image: 'assets/personnages/Neyra Velenis.png',
  },
  {
    id: 'gotvalis',
    name: 'GotValis',
    rarity: 'LEGENDARY',
    faction: 'GOTVALIS',
    description: 'L\'intelligence artificielle qui r√©git tout GotValis. Myst√©rieux, omniscient, et bienveillant... ou peut-√™tre pas.',
    passive: 'Omniscience',
    passiveDescription: 'Immunit√© aux effets de statut. +15% √† toutes les stats. R√©v√®le les intentions ennemies.',
    image: 'assets/personnages/GotValis.png',
  },
  {
    id: 'camille-leroux',
    name: 'Camille Leroux',
    rarity: 'EPIC',
    faction: 'GOUVERNEMENT',
    description: 'Ministre d\'√âtat, d√©cisionnaire froide et calculatrice. Elle pr√©f√®re les d√©cisions rationnelles aux √©motions.',
    passive: 'Autorit√© Gouvernementale',
    passiveDescription: '+10% de d√©g√¢ts sur les ennemis avec moins de 50% HP. +5% de r√©duction de d√©g√¢ts en groupe.',
    image: 'assets/personnages/Camille Leroux.png',
  },
  {
    id: 'sebastien-moreau',
    name: 'S√©bastien Moreau',
    rarity: 'EPIC',
    faction: 'GOUVERNEMENT',
    description: 'Diplomate de carri√®re, connu pour d√©samorcer les conflits avant qu\'ils ne commencent.',
    passive: 'N√©gociation Subtile',
    passiveDescription: '-10% de d√©g√¢ts re√ßus des attaques critiques. +5% de chances d\'esquive.',
    image: 'assets/personnages/S√©bastien Moreau.png',
  },
  {
    id: 'julien-vasseur',
    name: 'Julien Vasseur',
    rarity: 'RARE',
    faction: 'GOUVERNEMENT',
    description: 'Agent sp√©cial du gouvernement. Discret, efficace, mortel.',
    passive: 'Frappe Chirurgicale',
    passiveDescription: '+15% de d√©g√¢ts critiques. +5% de chances de coup critique.',
    image: 'assets/personnages/Julien Vasseur.png',
  },
  {
    id: 'eloise-dupont',
    name: '√âlo√Øse Dupont',
    rarity: 'RARE',
    faction: 'GOUVERNEMENT',
    description: 'Analyste strat√©gique, cerveau derri√®re de nombreuses op√©rations gouvernementales.',
    passive: 'Analyse Tactique',
    passiveDescription: '+10% de d√©g√¢ts aux ennemis affaiblis. R√©v√®le les points faibles ennemis.',
    image: 'assets/personnages/√âlo√Øse Dupont.png',
  },
  {
    id: 'thomas-renard',
    name: 'Thomas Renard',
    rarity: 'COMMON',
    faction: 'GOUVERNEMENT',
    description: 'Garde du corps gouvernemental. Loyaut√© absolue.',
    passive: 'Protection Rapproch√©e',
    passiveDescription: '+10 HP maximum. +5% de r√©duction de d√©g√¢ts.',
    image: 'assets/personnages/Thomas Renard.png',
  },
  {
    id: 'lucas-martin',
    name: 'Lucas Martin',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Citoyen ordinaire. Travaille comme m√©canicien. R√™ve d\'aventure.',
    passive: 'D√©brouillardise',
    passiveDescription: '+5% de chances de trouver des objets rares apr√®s un combat.',
    image: 'assets/personnages/Lucas Martin.png',
  },
  {
    id: 'marie-bernard',
    name: 'Marie Bernard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Enseignante passionn√©e par son m√©tier. Toujours pr√™te √† aider.',
    passive: 'Inspiration',
    passiveDescription: '+5% d\'XP gagn√©e pour toute l\'√©quipe.',
    image: 'assets/personnages/Marie Bernard.png',
  },
  {
    id: 'pierre-dubois',
    name: 'Pierre Dubois',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Boulanger du quartier. Connu pour ses croissants l√©gendaires.',
    passive: 'Pain Quotidien',
    passiveDescription: '+5 HP r√©g√©n√©r√©s toutes les 30 secondes.',
    image: 'assets/personnages/Pierre Dubois.png',
  },
  {
    id: 'sophie-laurent',
    name: 'Sophie Laurent',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: '√âtudiante en m√©decine. Veut sauver des vies.',
    passive: 'Premiers Soins',
    passiveDescription: '+10% d\'efficacit√© des objets de soin.',
    image: 'assets/personnages/Sophie Laurent.png',
  },
  {
    id: 'antoine-roux',
    name: 'Antoine Roux',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Artisan passionn√©. Ses cr√©ations sont uniques.',
    passive: 'Artisanat',
    passiveDescription: 'Les objets fabriqu√©s ont +5% de qualit√©.',
    image: 'assets/personnages/Antoine Roux.png',
  },
  {
    id: 'isabelle-moreau',
    name: 'Isabelle Moreau',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Infirmi√®re d√©vou√©e. Soigne tous ceux qui en ont besoin.',
    passive: 'Bienveillance',
    passiveDescription: '+5% de soins donn√©s √† tous les alli√©s.',
    image: 'assets/personnages/Isabelle Moreau.png',
  },
  {
    id: 'jules-fabre',
    name: 'Jules Fabre',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Livreur d√©vou√©. Conna√Æt la ville par c≈ìur.',
    passive: 'Connaissance du Terrain',
    passiveDescription: '+5% de vitesse de d√©placement.',
    image: 'assets/personnages/Jules Fabre.png',
  },
  {
    id: 'clara-petit',
    name: 'Clara Petit',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Biblioth√©caire tranquille. Adore les livres anciens.',
    passive: '√ârudition',
    passiveDescription: '+5% d\'XP gagn√©e.',
    image: 'assets/personnages/Clara Petit.png',
  },
  {
    id: 'maxime-girard',
    name: 'Maxime Girard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Jardinier patient. Fait pousser les plus belles fleurs.',
    passive: 'Main Verte',
    passiveDescription: '+5% de chances de r√©colter des ressources rares.',
    image: 'assets/personnages/Maxime Girard.png',
  },
  {
    id: 'emma-rousseau',
    name: 'Emma Rousseau',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Photographe talentueuse. Capture la beaut√© cach√©e du monde.',
    passive: '≈íil d\'Artiste',
    passiveDescription: '+5% de chances de d√©couvrir des secrets.',
    image: 'assets/personnages/Emma Rousseau.png',
  },
  {
    id: 'hugo-vincent',
    name: 'Hugo Vincent',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Musicien de rue. Ses m√©lodies apaisent les √¢mes.',
    passive: 'M√©lodie Apaisante',
    passiveDescription: '-5% de stress pour toute l\'√©quipe.',
    image: 'assets/personnages/Hugo Vincent.png',
  },
  {
    id: 'chloe-blanchard',
    name: 'Chlo√© Blanchard',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Chef cuisini√®re. Ses plats sont l√©gendaires.',
    passive: 'Festin',
    passiveDescription: 'Les objets de nourriture restaurent +10% de HP.',
    image: 'assets/personnages/Chlo√© Blanchard.png',
  },
  {
    id: 'mathieu-chevalier',
    name: 'Mathieu Chevalier',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Pompier courageux. Sauve des vies sans h√©siter.',
    passive: 'Courage du Feu',
    passiveDescription: '+10% de r√©sistance au feu.',
    image: 'assets/personnages/Mathieu Chevalier.png',
  },
  {
    id: 'lea-fontaine',
    name: 'L√©a Fontaine',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: 'Avocate brillante. D√©fend les innocents.',
    passive: 'Plaidoyer',
    passiveDescription: '+5% de chances de convaincre les PNJ.',
    image: 'assets/personnages/L√©a Fontaine.png',
  },
  {
    id: 'nathan-blanc',
    name: 'Nathan Blanc',
    rarity: 'COMMON',
    faction: 'CITOYEN',
    description: '√âlectricien comp√©tent. R√©pare tout ce qui est cass√©.',
    passive: 'R√©paration',
    passiveDescription: 'Les objets r√©par√©s ont +5% de durabilit√©.',
    image: 'assets/personnages/Nathan Blanc.png',
  },
  {
    id: 'anna-lereux-hote-brise',
    name: 'Anna Lereux - H√¥te Bris√©',
    rarity: 'EPIC',
    faction: 'HOTEL_DORMANT',
    description: 'Ancienne h√¥te de l\'H√¥tel Dormant. Traumatis√©e par ce qu\'elle a vu dans les couloirs √©ternels.',
    passive: 'R√©silience Bris√©e',
    passiveDescription: '+10% de r√©sistance aux effets mentaux. R√©duit le stress de 5% par minute.',
    image: 'assets/personnages/Anna Lereux - H√¥te Bris√©.png',
  },
  {
    id: 'thomas-dorne',
    name: 'Thomas Dorne',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Portier de l\'H√¥tel Dormant. Il ne parle jamais, mais ses yeux en disent long.',
    passive: 'Silence Observateur',
    passiveDescription: '+10% d\'esquive. R√©v√®le les ennemis cach√©s.',
    image: 'assets/personnages/Thomas Dorne.png',
  },
  {
    id: 'la-servante-sans-nom',
    name: 'La Servante Sans Nom',
    rarity: 'RARE',
    faction: 'HOTEL_DORMANT',
    description: 'Une servante fantomatique. On dit qu\'elle nettoie des chambres qui n\'existent plus.',
    passive: 'Pr√©sence Fantomatique',
    passiveDescription: '+15% d\'esquive. -10% de chances d\'√™tre cibl√©.',
    image: 'assets/personnages/La Servante Sans Nom.png',
  },
  {
    id: 'le-gardien-eternel',
    name: 'Le Gardien √âternel',
    rarity: 'LEGENDARY',
    faction: 'HOTEL_DORMANT',
    description: 'Gardien de l\'H√¥tel Dormant. Personne ne sait depuis combien de temps il est l√†.',
    passive: '√âternit√©',
    passiveDescription: 'Immunit√© au vieillissement et aux effets temporels. +20% de HP maximum.',
    image: 'assets/personnages/Le Gardien √âternel.png',
  },
  {
    id: 'alen-drave',
    name: 'Alen Drave',
    rarity: 'EPIC',
    faction: 'LA_FRACTURE',
    description: 'Leader charismatique de La Fracture. Combat pour la libert√© de GotValis.',
    passive: 'Cri de Ralliement',
    passiveDescription: '+10% d\'attaque pour tous les alli√©s. +5% de moral de l\'√©quipe.',
    image: 'assets/personnages/Alen Drave.png',
  },
  {
    id: 'elise-veyron',
    name: '√âlise Veyron',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'Hackeuse g√©niale. Peut s\'infiltrer dans n\'importe quel syst√®me.',
    passive: 'Intrusion Num√©rique',
    passiveDescription: '+15% de chances de pirater des syst√®mes. R√©v√®le les informations cach√©es.',
    image: 'assets/personnages/√âlise Veyron.png',
  },
  {
    id: 'marc-tavel',
    name: 'Marc Tavel',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'Strat√®ge militaire. Ancien soldat devenu rebelle.',
    passive: 'Tactique Rebelle',
    passiveDescription: '+10% de d√©g√¢ts d\'embuscade. +5% de d√©fense en inf√©riorit√© num√©rique.',
    image: 'assets/personnages/Marc Tavel.png',
  },
  {
    id: 'sarah-velin',
    name: 'Sarah Velin',
    rarity: 'RARE',
    faction: 'LA_FRACTURE',
    description: 'M√©decin de terrain. Soigne les bless√©s de La Fracture.',
    passive: 'Soins d\'Urgence',
    passiveDescription: '+20% d\'efficacit√© des soins. Peut soigner pendant le combat.',
    image: 'assets/personnages/Sarah Velin.png',
  },
  {
    id: 'vincent-gray',
    name: 'Vincent Gray',
    rarity: 'COMMON',
    faction: 'LA_FRACTURE',
    description: 'Messager rapide de La Fracture. Transporte des informations cruciales.',
    passive: 'Courrier',
    passiveDescription: '+10% de vitesse de d√©placement. +5% d\'esquive.',
    image: 'assets/personnages/Vincent Gray.png',
  },
  {
    id: 'infecte-alpha',
    name: 'Infect√© Alpha',
    rarity: 'EPIC',
    faction: 'INFECTION',
    description: 'Premier infect√© conscient. Intelligence terrifiante sous l\'apparence monstrueuse.',
    passive: 'Contagion Alpha',
    passiveDescription: 'Les ennemis proches subissent 5 d√©g√¢ts/sec. +15% de r√©sistance aux maladies.',
    image: 'assets/personnages/Infect√© Alpha.png',
  },
  {
    id: 'porteur-silencieux',
    name: 'Porteur Silencieux',
    rarity: 'RARE',
    faction: 'INFECTION',
    description: 'Infect√© asymptomatique. Propage la maladie sans le savoir.',
    passive: 'Porteur Sain',
    passiveDescription: 'Infecte les ennemis au contact (1% par seconde). Immunit√© aux sympt√¥mes.',
    image: 'assets/personnages/Porteur Silencieux.png',
  },
  {
    id: 'abomination-rampante',
    name: 'Abomination Rampante',
    rarity: 'RARE',
    faction: 'INFECTION',
    description: 'Cr√©ature hideuse n√©e de l\'infection. Plus d\'humanit√© en elle.',
    passive: 'R√©g√©n√©ration Morbide',
    passiveDescription: 'R√©g√©n√®re 3% des HP maximum par seconde. +10% de r√©sistance physique.',
    image: 'assets/personnages/Abomination Rampante.png',
  },
  {
    id: 'nuee-virale',
    name: 'Nu√©e Virale',
    rarity: 'EPIC',
    faction: 'INFECTION',
    description: 'Essaim de virus vivants. Intelligence collective terrifiante.',
    passive: 'Esprit de Ruche',
    passiveDescription: '+5% de stats par infect√© alli√© √† proximit√©. Partage les d√©g√¢ts re√ßus.',
    image: 'assets/personnages/Nu√©e Virale.png',
  },
  {
    id: 'patient-zero',
    name: 'Patient Z√©ro',
    rarity: 'LEGENDARY',
    faction: 'INFECTION',
    description: 'La source de tout. Le premier infect√©. La fin de l\'humanit√©.',
    passive: 'Origine de la Fin',
    passiveDescription: 'Tous les infect√©s gagnent +20% de stats. Immunit√© totale aux maladies. Infecte les ennemis vaincus.',
    image: 'assets/personnages/Patient Z√©ro.png',
  },
  {
    id: 'alphonse-kaedrin',
    name: 'Alphonse Kaedrin',
    rarity: 'LEGENDARY',
    faction: 'MONARCHIE',
    description: 'Roi de l\'ancienne monarchie. Revenu d\'entre les morts pour reprendre son tr√¥ne.',
    passive: 'Autorit√© Royale',
    passiveDescription: '+25% de d√©g√¢ts aux ennemis de rang inf√©rieur. Immunit√© aux effets de contr√¥le.',
    image: 'assets/personnages/Alphonse Kaedrin.png',
  },
  {
    id: 'isabeau-de-monfort',
    name: 'Isabeau de Monfort',
    rarity: 'EPIC',
    faction: 'MONARCHIE',
    description: 'Reine d√©chue. Belle, cruelle, et assoiff√©e de vengeance.',
    passive: 'Vengeance Royale',
    passiveDescription: '+20% de d√©g√¢ts apr√®s avoir subi des d√©g√¢ts. +10% de chances de contre-attaque.',
    image: 'assets/personnages/Isabeau de Monfort.png',
  },
  {
    id: 'duc-alaric',
    name: 'Duc Alaric',
    rarity: 'EPIC',
    faction: 'MONARCHIE',
    description: 'Duc puissant et loyal √† la couronne. Commande une arm√©e de chevaliers morts-vivants.',
    passive: 'Commandement √âternel',
    passiveDescription: 'Les alli√©s morts-vivants gagnent +15% de stats. +10% de d√©g√¢ts avec les armes de m√™l√©e.',
    image: 'assets/personnages/Duc Alaric.png',
  },
  {
    id: 'chevalier-noir',
    name: 'Chevalier Noir',
    rarity: 'RARE',
    faction: 'MONARCHIE',
    description: 'Chevalier sans visage. Loyal jusqu\'√† la mort... et au-del√†.',
    passive: 'Loyaut√© Aveugle',
    passiveDescription: '+15% de d√©fense. Immunit√© √† la peur. +10% de d√©g√¢ts en prot√©geant un alli√©.',
    image: 'assets/personnages/Chevalier Noir.png',
  },
  {
    id: 'dame-seraphine',
    name: 'Dame S√©raphine',
    rarity: 'RARE',
    faction: 'MONARCHIE',
    description: 'Noble √©l√©gante et manipulatrice. Ses mots sont des armes.',
    passive: 'Manipulation Courtoise',
    passiveDescription: '+10% de chances de charmer les ennemis. -5% de d√©g√¢ts re√ßus des ennemis charm√©s.',
    image: 'assets/personnages/Dame S√©raphine.png',
  },
  {
    id: 'garde-royal',
    name: 'Garde Royal',
    rarity: 'COMMON',
    faction: 'MONARCHIE',
    description: 'Soldat loyal √† la monarchie. Prot√®ge la couronne √† tout prix.',
    passive: 'Garde Royale',
    passiveDescription: '+10% de d√©fense. +5 HP maximum.',
    image: 'assets/personnages/Garde Royal.png',
  },
];

// Get a random rarity based on weights
export function getRandomRarity() {
  const totalWeight = Object.values(RARITIES).reduce((sum, r) => sum + r.weight, 0);
  let random = Math.random() * totalWeight;

  for (const [key, rarity] of Object.entries(RARITIES)) {
    random -= rarity.weight;
    if (random <= 0) {
      return key;
    }
  }

  return 'COMMON';
}

// Get random character of specific rarity
export function getRandomCharacterByRarity(rarity) {
  const charactersOfRarity = CHARACTERS.filter(c => c.rarity === rarity);
  if (charactersOfRarity.length === 0) {
    return CHARACTERS[Math.floor(Math.random() * CHARACTERS.length)];
  }
  return charactersOfRarity[Math.floor(Math.random() * charactersOfRarity.length)];
}

// Summon a random character
export function summonCharacter() {
  const rarity = getRandomRarity();
  return getRandomCharacterByRarity(rarity);
}

// Get character by ID
export function getCharacterById(id) {
  return CHARACTERS.find(c => c.id === id);
}

// Get rarity info
export function getRarityInfo(rarity) {
  return RARITIES[rarity] || RARITIES.COMMON;
}
